<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Def-schema by js-fullstack</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Def-schema</h1>
      <h2 class="project-tagline"></h2>
      <a href="https://github.com/js-fullstack/def-schema" class="btn">View on GitHub</a>
      <a href="https://github.com/js-fullstack/def-schema/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/js-fullstack/def-schema/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="def-schema" class="anchor" href="#def-schema" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>def-schema</h1>

<p>Define Object schema and test or validate target object. </p>

<p><strong>Important:</strong> Only support ECMAScript 6, both node engine and browsers.</p>

<h4>
<a id="install" class="anchor" href="#install" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Install</h4>

<div class="highlight highlight-source-shell"><pre>  npm install def-schema
</pre></div>

<p><strong>and</strong></p>

<div class="highlight highlight-source-js"><pre>
<span class="pl-k">let</span> def <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>def-schema<span class="pl-pds">'</span></span>);
</pre></div>

<h4>
<a id="example-basic" class="anchor" href="#example-basic" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example: Basic</h4>

<div class="highlight highlight-source-js"><pre>
    <span class="pl-en">def</span>(<span class="pl-c1">String</span>).<span class="pl-c1">match</span>(<span class="pl-c1">123</span>);   <span class="pl-c">// return false</span>
    <span class="pl-en">def</span>(<span class="pl-c1">String</span>).<span class="pl-c1">match</span>(<span class="pl-s"><span class="pl-pds">'</span>123<span class="pl-pds">'</span></span>); <span class="pl-c">// return true</span>

    <span class="pl-en">def</span>(<span class="pl-c1">String</span>).<span class="pl-en">validate</span>(<span class="pl-c1">123</span>); <span class="pl-c">// throw IncompatibleTypeError if not match</span>
    <span class="pl-en">def</span>(<span class="pl-c1">String</span>).<span class="pl-en">validate</span>(<span class="pl-s"><span class="pl-pds">'</span>123<span class="pl-pds">'</span></span>); <span class="pl-c">// passed with silence</span>
</pre></div>

<p><code>def</code> define a new <code>Schema</code> object. Use <code>match</code> to test type of target object, use <code>validate</code> to assert target object.</p>

<p><code>validate</code> is as same as <code>match</code> except it will throw exception if not match. </p>

<h4>
<a id="example-object" class="anchor" href="#example-object" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example: Object</h4>

<pre><code>  let Person = def({name:String, age:Number});

  Person.match({name:'foo', age: 123, otherPro:'111'});   //return true
  Person.match({age:123});     //return false, missing name
  Person.match({name: 123});   //return false, name is not string

</code></pre>

<h4>
<a id="example-function" class="anchor" href="#example-function" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example: Function</h4>

<div class="highlight highlight-source-js"><pre>  <span class="pl-k">let</span> Person <span class="pl-k">=</span> <span class="pl-en">def</span>({
    name<span class="pl-k">:</span> <span class="pl-c1">String</span>,
    age<span class="pl-k">:</span> <span class="pl-c1">Number</span>,
    sayHello<span class="pl-k">:</span> <span class="pl-c1">Function</span>
  });

  <span class="pl-k">let</span> person <span class="pl-k">=</span> {
    name<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>test<span class="pl-pds">'</span></span>,
    age<span class="pl-k">:</span> <span class="pl-c1">123</span>,
    <span class="pl-en">sayHello</span>() {
      <span class="pl-c">//...</span>
    }
  };

  <span class="pl-smi">Person</span>.<span class="pl-c1">match</span>(person); <span class="pl-c">// retrun true</span></pre></div>

<h4>
<a id="example-array" class="anchor" href="#example-array" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example: Array</h4>

<div class="highlight highlight-source-js"><pre>
  <span class="pl-en">def</span>([]).<span class="pl-c1">match</span>([<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-s"><span class="pl-pds">'</span>test<span class="pl-pds">'</span></span>]);  <span class="pl-c">//return true</span>
  <span class="pl-en">def</span>([<span class="pl-c1">Number</span>]).<span class="pl-c1">match</span>([<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-s"><span class="pl-pds">'</span>test<span class="pl-pds">'</span></span>]); <span class="pl-c">//return false</span>
  <span class="pl-en">def</span>([<span class="pl-c1">Number</span>]).<span class="pl-c1">match</span>([<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>]); <span class="pl-c">//return true</span>
  def[<span class="pl-c1">Number</span>,<span class="pl-c1">String</span>].<span class="pl-c1">match</span>([<span class="pl-c1">1</span>,<span class="pl-s"><span class="pl-pds">'</span>test<span class="pl-pds">'</span></span>]); <span class="pl-c">//return true</span>
  def[<span class="pl-c1">Number</span>,<span class="pl-c1">String</span>].<span class="pl-c1">match</span>([<span class="pl-c1">1</span>,<span class="pl-s"><span class="pl-pds">'</span>test<span class="pl-pds">'</span></span>,<span class="pl-c1">4</span>,<span class="pl-c1">5</span>]); <span class="pl-c">//return true</span>
</pre></div>

<h4>
<a id="example-combine-array-and-object" class="anchor" href="#example-combine-array-and-object" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example: Combine Array and Object</h4>

<div class="highlight highlight-source-js"><pre>  <span class="pl-k">let</span> Person <span class="pl-k">=</span> <span class="pl-en">def</span>({
    name<span class="pl-k">:</span> <span class="pl-c1">String</span>
    age<span class="pl-k">:</span> <span class="pl-c1">Number</span>
    skills<span class="pl-k">:</span> [<span class="pl-c1">String</span>]
  });

  <span class="pl-k">let</span> person1 <span class="pl-k">=</span> {name<span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">'</span>foo<span class="pl-pds">'</span></span>, age<span class="pl-k">:</span><span class="pl-c1">123</span>, skill<span class="pl-k">:</span> [<span class="pl-s"><span class="pl-pds">'</span>js<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>java<span class="pl-pds">'</span></span>]};
  <span class="pl-k">let</span> person2 <span class="pl-k">=</span> {name<span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">'</span>foo<span class="pl-pds">'</span></span>, age<span class="pl-k">:</span><span class="pl-c1">123</span>, skill<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>js<span class="pl-pds">'</span></span>};

  <span class="pl-smi">Person</span>.<span class="pl-c1">match</span>(person1); <span class="pl-c">//return true;</span>
  <span class="pl-smi">Person</span>.<span class="pl-c1">match</span>(person2); <span class="pl-c">//return false;</span>

  <span class="pl-en">def</span>([Person]).<span class="pl-c1">match</span>([person1, person2]); <span class="pl-c">//return false;</span>
</pre></div>

<h4>
<a id="example-customize-validator" class="anchor" href="#example-customize-validator" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example: Customize validator</h4>

<div class="highlight highlight-source-js"><pre>  <span class="pl-k">let</span> Integer <span class="pl-k">=</span> <span class="pl-smi">def</span>.<span class="pl-en">fn</span>(<span class="pl-smi">x</span> <span class="pl-k">=&gt;</span> <span class="pl-en">def</span>(<span class="pl-c1">Number</span>).<span class="pl-c1">match</span>(x) <span class="pl-k">&amp;&amp;</span> value <span class="pl-k">%</span> <span class="pl-c1">1</span> <span class="pl-k">===</span> <span class="pl-c1">0</span> <span class="pl-k">&amp;&amp;</span> value <span class="pl-k">&gt;=</span> <span class="pl-k">-</span><span class="pl-c1">2147483648</span> <span class="pl-k">&amp;&amp;</span> value <span class="pl-k">&lt;=</span> <span class="pl-c1">2147483647</span>);

  <span class="pl-smi">Integer</span>.<span class="pl-c1">match</span>(<span class="pl-c1">123</span>); <span class="pl-c">//return true;</span>
  <span class="pl-smi">Integer</span>.<span class="pl-c1">match</span>(<span class="pl-c1">1.23</span>); <span class="pl-c">//return false;</span>
</pre></div>

<p>Here, by define the validate function we can decided what is 'Integer' in our program.</p>

<h4>
<a id="example-nest-definition" class="anchor" href="#example-nest-definition" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example: Nest definition</h4>

<p>Defined new type by leverage existing type, I mean:</p>

<div class="highlight highlight-source-js"><pre>  <span class="pl-k">let</span> Integer <span class="pl-k">=</span> <span class="pl-smi">def</span>.<span class="pl-en">fn</span>(<span class="pl-smi">x</span> <span class="pl-k">=&gt;</span> <span class="pl-en">def</span>(<span class="pl-c1">Number</span>).<span class="pl-c1">match</span>(x) <span class="pl-k">&amp;&amp;</span> value <span class="pl-k">%</span> <span class="pl-c1">1</span> <span class="pl-k">===</span> <span class="pl-c1">0</span> <span class="pl-k">&amp;&amp;</span> value <span class="pl-k">&gt;=</span> <span class="pl-k">-</span><span class="pl-c1">2147483648</span> <span class="pl-k">&amp;&amp;</span> value <span class="pl-k">&lt;=</span> <span class="pl-c1">2147483647</span>);
  <span class="pl-k">let</span> Person <span class="pl-k">=</span> <span class="pl-en">def</span>({
    name<span class="pl-k">:</span> <span class="pl-c1">String</span>,
    age<span class="pl-k">:</span> Integer
  });

  <span class="pl-smi">Person</span>.<span class="pl-c1">match</span>({name<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>foo<span class="pl-pds">'</span></span>, age<span class="pl-k">:</span><span class="pl-c1">123</span>}); <span class="pl-c">//return true;</span>
  <span class="pl-smi">Person</span>.<span class="pl-c1">match</span>({name<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>foo<span class="pl-pds">'</span></span>, age<span class="pl-k">:</span><span class="pl-c1">1.23</span>}); <span class="pl-c">//return false;</span>

}); </pre></div>

<h4>
<a id="example-opertional-property" class="anchor" href="#example-opertional-property" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example: Opertional property</h4>

<div class="highlight highlight-source-js"><pre>  <span class="pl-k">let</span> Person <span class="pl-k">=</span> <span class="pl-en">def</span>({
    name<span class="pl-k">:</span> <span class="pl-c1">String</span>,
    age<span class="pl-k">:</span> <span class="pl-smi">def</span>.<span class="pl-en">opt</span>(<span class="pl-c1">Number</span>)
  });

  <span class="pl-smi">Person</span>.<span class="pl-c1">match</span>({name<span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">'</span>foo<span class="pl-pds">'</span></span>, age<span class="pl-k">:</span><span class="pl-c1">1234</span>}); <span class="pl-c">//return true;</span>
  <span class="pl-smi">Person</span>.<span class="pl-c1">match</span>({name<span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">'</span>foo<span class="pl-pds">'</span></span>}); <span class="pl-c">//return true;</span>
  <span class="pl-smi">Person</span>.<span class="pl-c1">match</span>({name<span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">'</span>foo<span class="pl-pds">'</span></span>, age<span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">'</span>bar<span class="pl-pds">'</span></span>}); <span class="pl-c">//return false;</span></pre></div>

<h4>
<a id="example-other-buildin-functions" class="anchor" href="#example-other-buildin-functions" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example: Other buildin functions</h4>

<div class="highlight highlight-source-js"><pre>  <span class="pl-smi">def</span>.<span class="pl-en">or</span>(<span class="pl-c1">String</span>,<span class="pl-c1">Number</span>).<span class="pl-c1">match</span>(<span class="pl-s"><span class="pl-pds">'</span>hello<span class="pl-pds">'</span></span>);  <span class="pl-c">//return true;</span>
  <span class="pl-smi">def</span>.<span class="pl-en">and</span>({name<span class="pl-k">:</span><span class="pl-c1">String</span>},{age<span class="pl-k">:</span><span class="pl-c1">Number</span>}).<span class="pl-c1">match</span>({name<span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">'</span>foo<span class="pl-pds">'</span></span>, age<span class="pl-k">:</span><span class="pl-c1">123</span>});  <span class="pl-c">//return true;</span>

  <span class="pl-k">let</span> proto <span class="pl-k">=</span> {name<span class="pl-k">:</span><span class="pl-c1">String</span>};
  <span class="pl-k">let</span> target <span class="pl-k">=</span> <span class="pl-c1">Object</span>.<span class="pl-en">create</span>(proto);
  <span class="pl-smi">def</span>.<span class="pl-en">asProto</span>(proto).<span class="pl-c1">match</span>(target);  <span class="pl-c">//return true;</span>


  <span class="pl-k">let</span> Range <span class="pl-k">=</span> <span class="pl-smi">def</span>.<span class="pl-en">param</span>( (<span class="pl-smi">x</span>, <span class="pl-k">from</span>, <span class="pl-smi">to</span>) <span class="pl-k">=&gt;</span> <span class="pl-en">def</span>(<span class="pl-c1">Number</span>).<span class="pl-c1">match</span>(x) <span class="pl-k">&amp;&amp;</span> x <span class="pl-k">&gt;=</span> <span class="pl-k">from</span>  <span class="pl-k">&amp;&amp;</span> x <span class="pl-k">&lt;=</span> to );

  <span class="pl-en">Range</span>(<span class="pl-c1">1</span>,<span class="pl-c1">10</span>).<span class="pl-c1">match</span>(<span class="pl-c1">5</span>); <span class="pl-c">//return true;</span>
  <span class="pl-en">Range</span>(<span class="pl-c1">1</span>,<span class="pl-c1">10</span>).<span class="pl-c1">match</span>(<span class="pl-k">-</span><span class="pl-c1">5</span>); <span class="pl-c">//return return false;</span>
</pre></div>

<h4>
<a id="example-reuse-definition-partially" class="anchor" href="#example-reuse-definition-partially" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example: Reuse definition partially</h4>

<div class="highlight highlight-source-js"><pre>  <span class="pl-k">let</span> Person <span class="pl-k">=</span> <span class="pl-en">def</span>({
    name<span class="pl-k">:</span> {
      first<span class="pl-k">:</span> <span class="pl-c1">String</span>,
      last<span class="pl-k">:</span> <span class="pl-c1">String</span>
    },
    age<span class="pl-k">:</span> <span class="pl-c1">Number</span>
  });

  <span class="pl-smi">Person</span>.<span class="pl-c1">name</span>.<span class="pl-c1">match</span>({first<span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">'</span>foo<span class="pl-pds">'</span></span>, last<span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">'</span>bar<span class="pl-pds">'</span></span>}); <span class="pl-c">//return true</span>
  <span class="pl-smi">Person</span>.<span class="pl-c1">name</span>.<span class="pl-c1">match</span>({first<span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">'</span>foo<span class="pl-pds">'</span></span>}); <span class="pl-c">//return false</span>
</pre></div>

<h4>
<a id="example-generate-random-instance" class="anchor" href="#example-generate-random-instance" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example: Generate random instance</h4>

<div class="highlight highlight-source-js"><pre>  <span class="pl-k">let</span> Person <span class="pl-k">=</span> <span class="pl-en">def</span>({
    name<span class="pl-k">:</span> <span class="pl-c1">String</span>,
    age<span class="pl-k">:</span><span class="pl-c1">Number</span>
  })

  <span class="pl-smi">Person</span>.<span class="pl-smi">random</span> <span class="pl-c">//return random instance which match definition of Person</span>


</pre></div>

<p>Thanks :) </p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/js-fullstack/def-schema">Def-schema</a> is maintained by <a href="https://github.com/js-fullstack">js-fullstack</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
